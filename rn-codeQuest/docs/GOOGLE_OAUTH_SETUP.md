# Google OAuth ì„¤ì • ê°€ì´ë“œ (Web + iOS + Android)

## ğŸ¯ ëª©í‘œ
React Native ì•±ì—ì„œ Google ì†Œì…œ ë¡œê·¸ì¸ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ **3ê°œì˜ í´ë¼ì´ì–¸íŠ¸ ID**ë¥¼ ë°œê¸‰ë°›ìŠµë‹ˆë‹¤.

### ì™œ 3ê°œê°€ í•„ìš”í•œê°€?
- **Web Client ID**: Expo Go ê°œë°œ í™˜ê²½, ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ ì‹¤í–‰í•  ë•Œ
- **iOS Client ID**: iOS ê¸°ê¸° ë° ì‹œë®¬ë ˆì´í„°ì—ì„œ ì‹¤í–‰í•  ë•Œ
- **Android Client ID**: Android ê¸°ê¸° ë° ì—ë®¬ë ˆì´í„°ì—ì„œ ì‹¤í–‰í•  ë•Œ

---

## ğŸ“ Step 1: Google Cloud Console ì ‘ì†

1. **Google Cloud Console** ì ‘ì†
   - ì£¼ì†Œ: https://console.cloud.google.com/
   - Google ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸

2. **í”„ë¡œì íŠ¸ ì„ íƒ ë˜ëŠ” ìƒì„±**
   - ìƒë‹¨ì˜ í”„ë¡œì íŠ¸ ë“œë¡­ë‹¤ìš´ í´ë¦­
   - "ìƒˆ í”„ë¡œì íŠ¸" í´ë¦­
   - í”„ë¡œì íŠ¸ ì´ë¦„: `CodeQuest` (ì›í•˜ëŠ” ì´ë¦„ ì…ë ¥)
   - "ë§Œë“¤ê¸°" í´ë¦­

---

## ğŸ” Step 2: OAuth ë™ì˜ í™”ë©´ ì„¤ì •

í´ë¼ì´ì–¸íŠ¸ IDë¥¼ ë§Œë“¤ê¸° ì „ì— **OAuth ë™ì˜ í™”ë©´**ì„ ë¨¼ì € ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤!

### 2-1. OAuth ë™ì˜ í™”ë©´ìœ¼ë¡œ ì´ë™
1. ì™¼ìª½ ë©”ë‰´ â†’ "API ë° ì„œë¹„ìŠ¤" â†’ "OAuth ë™ì˜ í™”ë©´" í´ë¦­
2. **ì²˜ìŒ ë°©ë¬¸ ì‹œ**:
   - "User Type" ì„ íƒ í™”ë©´ì´ ë‚˜ì˜¤ë©´ â†’ âœ… **ì™¸ë¶€(External)** ì„ íƒ
   - "ë§Œë“¤ê¸°" ë˜ëŠ” "êµ¬ì„±" ë²„íŠ¼ í´ë¦­
   - ì´ë¯¸ ì„¤ì •ë˜ì–´ ìˆë‹¤ë©´ ë°”ë¡œ ì•± ì •ë³´ ì…ë ¥ í™”ë©´ì´ ë‚˜ì˜µë‹ˆë‹¤

### 2-2. ì•± ì •ë³´ ì…ë ¥
ë‹¤ìŒ ì •ë³´ë¥¼ ì…ë ¥í•˜ì„¸ìš”:

| í•­ëª© | ì…ë ¥ ë‚´ìš© |
|------|----------|
| ì•± ì´ë¦„ | `CodeQuest` |
| ì‚¬ìš©ì ì§€ì› ì´ë©”ì¼ | (ë³¸ì¸ Gmail ì£¼ì†Œ) |
| ì•± ë¡œê³  | (ì„ íƒì‚¬í•­, ë‚˜ì¤‘ì— ì¶”ê°€ ê°€ëŠ¥) |
| ì•± ë„ë©”ì¸ | (ì„ íƒì‚¬í•­, ë‚˜ì¤‘ì— ì¶”ê°€) |
| ê°œë°œì ì—°ë½ì²˜ ì •ë³´ | (ë³¸ì¸ Gmail ì£¼ì†Œ) |

### 2-3. ë²”ìœ„(Scopes) ì„¤ì •
1. "ë²”ìœ„ ì¶”ê°€ ë˜ëŠ” ì‚­ì œ" í´ë¦­
2. ë‹¤ìŒ ë²”ìœ„ ì„ íƒ:
   - âœ… `.../auth/userinfo.email`
   - âœ… `.../auth/userinfo.profile`
   - âœ… `openid`
3. "ì—…ë°ì´íŠ¸" â†’ "ì €ì¥ í›„ ê³„ì†" í´ë¦­

### 2-4. í…ŒìŠ¤íŠ¸ ì‚¬ìš©ì ì¶”ê°€ (ê°œë°œ ë‹¨ê³„ì—ì„œ í•„ìš”)
1. "í…ŒìŠ¤íŠ¸ ì‚¬ìš©ì" ì„¹ì…˜ì—ì„œ "ADD USERS" í´ë¦­
2. ê°œë°œì— ì‚¬ìš©í•  Gmail ì£¼ì†Œ ì…ë ¥
3. "ì €ì¥ í›„ ê³„ì†" í´ë¦­

### 2-5. ìš”ì•½ í™•ì¸
- ëª¨ë“  ì •ë³´ í™•ì¸ í›„ "ëŒ€ì‹œë³´ë“œë¡œ ëŒì•„ê°€ê¸°" í´ë¦­

---

## ğŸ”‘ Step 3: í´ë¼ì´ì–¸íŠ¸ ID 3ê°œ ìƒì„±

ì´ì œ **3ê°œì˜ í´ë¼ì´ì–¸íŠ¸ ID**ë¥¼ ìƒì„±í•©ë‹ˆë‹¤!

### 3-1. ì‚¬ìš©ì ì¸ì¦ ì •ë³´ í˜ì´ì§€ë¡œ ì´ë™
1. ì™¼ìª½ ë©”ë‰´ â†’ "API ë° ì„œë¹„ìŠ¤" â†’ "ì‚¬ìš©ì ì¸ì¦ ì •ë³´" í´ë¦­
2. ìƒë‹¨ì˜ "+ ì‚¬ìš©ì ì¸ì¦ ì •ë³´ ë§Œë“¤ê¸°" í´ë¦­
3. "OAuth í´ë¼ì´ì–¸íŠ¸ ID" ì„ íƒ

---

### 3-2. Web Client ID ìƒì„± (1/3)

**ì• í”Œë¦¬ì¼€ì´ì…˜ ìœ í˜•**: `ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜` ì„ íƒ

**ì´ë¦„**: `CodeQuest Web Client`

**ìŠ¹ì¸ëœ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì›ë³¸**:
```
https://auth.expo.io
```

**ìŠ¹ì¸ëœ ë¦¬ë””ë ‰ì…˜ URI**:
```
https://auth.expo.io/@YOUR_EXPO_USERNAME/rn-codeQuest
```
> âš ï¸ `YOUR_EXPO_USERNAME`ì„ ë³¸ì¸ì˜ Expo ê³„ì • ì´ë¦„ìœ¼ë¡œ êµì²´í•˜ì„¸ìš”!
> 
> Expo ê³„ì •ì´ ì—†ë‹¤ë©´:
> - í„°ë¯¸ë„ì—ì„œ `npx expo whoami` ì‹¤í–‰
> - ë¡œê·¸ì¸ ì•ˆ ë˜ì–´ ìˆìœ¼ë©´ `npx expo login` ì‹¤í–‰

**"ë§Œë“¤ê¸°" í´ë¦­** â†’ ìƒì„±ëœ í´ë¼ì´ì–¸íŠ¸ ID ë³µì‚¬ (ë‚˜ì¤‘ì— ì‚¬ìš©)

---

### 3-3. iOS Client ID ìƒì„± (2/3)

ë‹¤ì‹œ "+ ì‚¬ìš©ì ì¸ì¦ ì •ë³´ ë§Œë“¤ê¸°" â†’ "OAuth í´ë¼ì´ì–¸íŠ¸ ID" í´ë¦­

**ì• í”Œë¦¬ì¼€ì´ì…˜ ìœ í˜•**: `iOS` ì„ íƒ

**ì´ë¦„**: `CodeQuest iOS Client`

**ë²ˆë“¤ ID**:
```
com.yourcompany.rncodequest
```
> âš ï¸ ë‚˜ì¤‘ì— `app.json`ì˜ `ios.bundleIdentifier`ì™€ **ì •í™•íˆ ì¼ì¹˜**í•´ì•¼ í•©ë‹ˆë‹¤!
> 
> ê¶Œì¥: `com.{ë³¸ì¸ì´ë¦„}.codequest` í˜•ì‹ (ì˜ˆ: `com.hobbyer.codequest`)

**"ë§Œë“¤ê¸°" í´ë¦­** â†’ ìƒì„±ëœ í´ë¼ì´ì–¸íŠ¸ ID ë³µì‚¬

---

### 3-4. Android Client ID ìƒì„± (3/3)

ë‹¤ì‹œ "+ ì‚¬ìš©ì ì¸ì¦ ì •ë³´ ë§Œë“¤ê¸°" â†’ "OAuth í´ë¼ì´ì–¸íŠ¸ ID" í´ë¦­

**ì• í”Œë¦¬ì¼€ì´ì…˜ ìœ í˜•**: `Android` ì„ íƒ

**ì´ë¦„**: `CodeQuest Android Client`

**íŒ¨í‚¤ì§€ ì´ë¦„**:
```
com.yourcompany.rncodequest
```
> âš ï¸ ë‚˜ì¤‘ì— `app.json`ì˜ `android.package`ì™€ **ì •í™•íˆ ì¼ì¹˜**í•´ì•¼ í•©ë‹ˆë‹¤!
> 
> ê¶Œì¥: `com.{ë³¸ì¸ì´ë¦„}.codequest` í˜•ì‹

**SHA-1 ì¸ì¦ì„œ ì§€ë¬¸** (ê°œë°œìš©):

Expo ê°œë°œ í™˜ê²½ì—ì„œëŠ” ë‹¤ìŒ ê°’ì„ ì‚¬ìš©í•˜ì„¸ìš”:
```
E9:63:7E:89:B5:4E:B4:58:F7:29:D4:65:61:5F:3F:F1:5C:7B:62:8D
```
> ğŸ’¡ ì´ê²ƒì€ Expoì˜ ê¸°ë³¸ ê°œë°œ ì¸ì¦ì„œ ì§€ë¬¸ì…ë‹ˆë‹¤.
> ì‹¤ì œ ë°°í¬ ì‹œì—ëŠ” ë³¸ì¸ì˜ Keystore ì§€ë¬¸ìœ¼ë¡œ êµì²´í•´ì•¼ í•©ë‹ˆë‹¤!

**"ë§Œë“¤ê¸°" í´ë¦­** â†’ ìƒì„±ëœ í´ë¼ì´ì–¸íŠ¸ ID ë³µì‚¬

---

## âœ… Step 4: ì½”ë“œì— í´ë¼ì´ì–¸íŠ¸ ID ì ìš©

3ê°œì˜ í´ë¼ì´ì–¸íŠ¸ IDë¥¼ ëª¨ë‘ ë°›ì•˜ë‹¤ë©´, `LoginScreen.js`ì— ì…ë ¥í•˜ì„¸ìš”!

### íŒŒì¼ ìœ„ì¹˜
```
src/screens/auth/LoginScreen.js
```

### ìˆ˜ì •í•  ë¶€ë¶„
```javascript
const [request, response, promptAsync] = Google.useAuthRequest({
  webClientId: 'ì—¬ê¸°ì—_Web_Client_ID_ë¶™ì—¬ë„£ê¸°',
  iosClientId: 'ì—¬ê¸°ì—_iOS_Client_ID_ë¶™ì—¬ë„£ê¸°',
  androidClientId: 'ì—¬ê¸°ì—_Android_Client_ID_ë¶™ì—¬ë„£ê¸°',
});
```
---

## ğŸ§ª Step 5: í…ŒìŠ¤íŠ¸í•˜ê¸°

### 5-1. Expo Goì—ì„œ í…ŒìŠ¤íŠ¸ (Web Client ID ì‚¬ìš©)
```powershell
npm start
```
- QR ì½”ë“œ ìŠ¤ìº” ë˜ëŠ” Android Emulator/iOS Simulator ì‹¤í–‰
- ë¡œê·¸ì¸ í™”ë©´ì—ì„œ "Googleë¡œ ë¡œê·¸ì¸" ë²„íŠ¼ í´ë¦­
- Google ê³„ì • ì„ íƒ â†’ ë¡œê·¸ì¸ ì„±ê³µ í™•ì¸

### 5-2. ë¬¸ì œ í•´ê²°
**ì—ëŸ¬ ë°œìƒ ì‹œ í™•ì¸ ì‚¬í•­**:

1. âŒ `redirect_uri_mismatch` ì—ëŸ¬
   - Web Client IDì˜ **ìŠ¹ì¸ëœ ë¦¬ë””ë ‰ì…˜ URI**ê°€ ì •í™•í•œì§€ í™•ì¸
   - `https://auth.expo.io/@YOUR_EXPO_USERNAME/rn-codeQuest`
   - Expo ì‚¬ìš©ìëª…ì´ ì •í™•í•œì§€ í™•ì¸ (`npx expo whoami`)

2. âŒ `invalid_client` ì—ëŸ¬
   - í´ë¼ì´ì–¸íŠ¸ IDë¥¼ ë³µì‚¬í•  ë•Œ ê³µë°±ì´ í¬í•¨ë˜ì§€ ì•Šì•˜ëŠ”ì§€ í™•ì¸
   - `.apps.googleusercontent.com`ê¹Œì§€ ì „ì²´ ë³µì‚¬í–ˆëŠ”ì§€ í™•ì¸

3. âŒ ë¡œê·¸ì¸ íŒì—…ì´ ì•ˆ ëœ¨ëŠ” ê²½ìš°
   - `expo-auth-session`, `expo-crypto` ì„¤ì¹˜ í™•ì¸
   - Metro ë²ˆë“¤ëŸ¬ ì¬ì‹œì‘ (`r` ì…ë ¥)

---

## ğŸ“± Step 6: app.json ì„¤ì • (ë‚˜ì¤‘ì— í•„ìš”)

ì‹¤ì œ ì•± ë¹Œë“œ ì‹œ `app.json`ì— ë²ˆë“¤ IDì™€ íŒ¨í‚¤ì§€ëª…ì„ ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤.

```json
{
  "expo": {
    "name": "rn-codeQuest",
    "slug": "rn-codeQuest",
    "ios": {
      "bundleIdentifier": "com.yourcompany.rncodequest"
    },
    "android": {
      "package": "com.yourcompany.rncodequest"
    }
  }
}
```

---

## ğŸ‰ ì™„ë£Œ!

ì´ì œ Google ì†Œì…œ ë¡œê·¸ì¸ì´ ì‘ë™í•©ë‹ˆë‹¤!

### ë‹¤ìŒ ë‹¨ê³„
- [ ] Kakao ë¡œê·¸ì¸ êµ¬í˜„
- [ ] Naver ë¡œê·¸ì¸ êµ¬í˜„
- [ ] Apple ë¡œê·¸ì¸ êµ¬í˜„ (iOSë§Œ í•´ë‹¹)

---

## ğŸ“š ì°¸ê³  ìë£Œ

- [Expo Auth Session ê³µì‹ ë¬¸ì„œ](https://docs.expo.dev/guides/authentication/#google)
- [Google Cloud Console](https://console.cloud.google.com/)
- [OAuth 2.0 ì„¤ëª…](https://developers.google.com/identity/protocols/oauth2)
